---
layout: single
title: "[aws] Instance 다른 계정으로 복제"
---

---
### EBS가 System Key로 암호화되어 있는 경우

> (계정 a) 

1. 복제할 인스턴스의 볼륨의 스냅샷을 뜸
2. 스냅샷 생성이 완료되면 볼륨을 생성 
  - 이때 암호화를 안하면 깔끔한데 disable되어 있다면 KMS 키를 선택
3. 스냅샷 다시 생성 (얘를 계정 b로 복제 할 것)
4. 생성을 기다리며 KMS가서 아까 2에서 지정한 키에 들어가서 공유받을 계정을 추가해준다 (추후에 지울 것)
5. 3에서 다시 생성한 스냅샷에 공유 계정에 공유받을 계정을 똑같이 추가해준다.

> (계정 b)

6. 공유 받을 계정(b)의 콘솔 스냅샷에서 select box를 프라이빗 스냅샷으로 전환 -> a에서 공유한 스냅샷이 생겨있음 선택
7. 스냅샷 복사 -> 키는 기본 시스템키로 암호화해도 상관이 없을 것임.
8. 이미지 생성
9. 이미지로 인스턴스 시작
10. 보안그룹 작업

> (계정 a)

11. a 콘솔로 이동하여 b계정 권한 추가 한 것 스냅샷 권한 뺴거나 삭제, KMS 권한 제거
